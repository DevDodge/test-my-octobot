# DK-OctoBot: دليل التثبيت الكامل من الصفر

هذا الدليل مصمم لمساعدتك على تثبيت وتشغيل مشروع DK-OctoBot من البداية. تم إعداده بعد مراجعة الأخطاء التي واجهتك، ويتضمن الحلول النهائية.

## المتطلبات الأساسية

قبل البدء، تأكد من أن لديك البرامج التالية مثبتة على جهازك:

- **Node.js**: إصدار `18.x` أو أحدث.
- **pnpm**: مدير حزم Node.js. يمكنك تثبيته عبر `npm install -g pnpm`.
- **Git**: للتحكم في الإصدارات وتحميل المشروع.
- **PostgreSQL**: قاعدة بيانات. ستحتاج إلى قاعدة بيانات تعمل للبدء.

---

## الخطوات بالتفصيل

اتبع هذه الخطوات بالترتيب لضمان تثبيت ناجح.

### الخطوة 1: تحميل المشروع

ابدأ بنسخ (clone) أحدث إصدار من المشروع من مستودع GitHub.

```bash
# احذف المجلد القديم إذا كان موجودًا
rm -rf test-my-octobot

# قم بتحميل المشروع من جديد
git clone https://github.com/DevDodge/test-my-octobot.git

# ادخل إلى مجلد المشروع
cd test-my-octobot
```

### الخطوة 2: تثبيت الاعتماديات (Dependencies)

استخدم `pnpm` لتثبيت جميع الحزم المطلوبة للمشروع. لقد تم إضافة `bcryptjs` إلى قائمة الحزم لحل الخطأ الذي واجهته.

```bash
pnpm install
```

### الخطوة 3: إعداد قاعدة البيانات (PostgreSQL)

1.  **إنشاء قاعدة بيانات**: قم بإنشاء قاعدة بيانات جديدة ومستخدم جديد في PostgreSQL.
2.  **الحصول على رابط الاتصال**: ستحتاج إلى رابط الاتصال (Database URL) الذي يكون عادةً بهذا الشكل:
    `postgresql://USER:PASSWORD@HOST:PORT/DATABASE`

    - **USER**: اسم المستخدم الذي أنشأته.
    - **PASSWORD**: كلمة مرور المستخدم.
    - **HOST**: عنوان الخادم (عادة `localhost` إذا كانت قاعدة البيانات على نفس الجهاز).
    - **PORT**: منفذ PostgreSQL (الافتراضي هو `5432`).
    - **DATABASE**: اسم قاعدة البيانات التي أنشأتها.

### الخطوة 4: إعداد متغيرات البيئة (Environment Variables)

هذه هي أهم خطوة لربط التطبيق بقاعدة البيانات وتأمين نظام المصادقة.

1.  **إنشاء ملف `.env`**: في جذر مجلد المشروع، قم بإنشاء ملف جديد باسم `.env`.

    ```bash
    touch .env
    ```

2.  **إضافة المتغيرات**: انسخ المحتوى التالي في ملف `.env` واملأ الفراغات بالمعلومات الصحيحة.

    ```env
    # Node Environment
    # اضبطه على "production" عند النشر الفعلي، أو اتركه "development" للتطوير
    NODE_ENV="development"

    # Database Connection
    # استبدل هذا الرابط برابط قاعدة بيانات PostgreSQL الخاصة بك
    DATABASE_URL="postgresql://USER:PASSWORD@HOST:PORT/DATABASE"

    # JWT Secret for Authentication
    # يجب أن يكون سلسلة نصية طويلة وعشوائية وقوية جداً. استخدم هذا الأمر لتوليد مفتاح آمن:
    # openssl rand -hex 32
    JWT_SECRET="your_super_strong_and_random_secret_key_here"
    ```

    **ملاحظات هامة:**
    - **`JWT_SECRET`**: هذا المفتاح ضروري لتأمين جلسات المستخدمين. لا تشاركه أبدًا واحتفظ به سريًا.
    - **لا تقم برفع ملف `.env` إلى GitHub**، فهو يحتوي على معلومات حساسة.

### الخطوة 5: تشغيل التطبيق

الآن بعد أن تم إعداد كل شيء، يمكنك تشغيل التطبيق.

- **التشغيل في وضع التطوير (`dev`)**: هذا الوضع الأفضل أثناء التطوير، حيث يقوم بتحديث الخادم تلقائيًا عند أي تغيير في الكود.

  ```bash
  pnpm dev
  ```

- **التشغيل في وضع الإنتاج (`production`)**: عند نشر التطبيق على خادم حقيقي، اتبع هذه الخطوات:

  ```bash
  # 1. بناء المشروع للإنتاج
  pnpm build

  # 2. تشغيل الخادم
  pnpm start
  ```

عند تشغيل الخادم لأول مرة، سيقوم تلقائيًا بتطبيق تحديثات قاعدة البيانات (migrations) وإنشاء حساب مسؤول افتراضي.

#### **معلومات الدخول الافتراضية للمسؤول:**

- **البريد الإلكتروني**: `DK-OctoBot-Tests@Gmail.com`
- **كلمة المرور**: `Eng.OCTOBOT.DK.Company.Dodge.Kareem.12.it.com`

> **هام جداً**: قم بتسجيل الدخول فورًا وتغيير كلمة المرور الافتراضية من خلال صفحة "إدارة المسؤولين".

---

## ملخص الأخطاء التي تم حلها

1.  **خطأ `bcrypt`**: كان المشروع يستخدم `bcrypt` ولكن الحزمة المثبتة كانت `bcryptjs`. تم تصحيح هذا عن طريق إضافة `bcryptjs` رسميًا إلى `package.json`.
2.  **خطأ `URI malformed`**: كان هذا الخطأ ناتجًا عن كود تتبع تحليلات (`analytics script`) في ملف `index.html` يستخدم متغيرات بيئة غير موجودة (`%VITE_ANALYTICS_...%`). تم حذف هذا الكود بالكامل لحل المشكلة.

باتباع هذا الدليل، يجب أن يعمل المشروع لديك بسلاسة وبدون أي أخطاء. إذا واجهت أي مشكلة أخرى، فلا تتردد في إبلاغي.
